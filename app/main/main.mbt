type HostString;
fn HostString::utf16words(self: HostString) -> Int = "hoststring" "utf16words"
fn HostString::fillmem(self: HostString, hostmem: MoonMem) -> Int = "hoststring" "fillmem"
fn HostString::get(self: HostString) -> String {
  let len_bytes = self.utf16words() * 2
  let bytes = Bytes::make(len_bytes, 255)
  let mem = MoonMem::new(bytes)
  let _ = self.fillmem(mem)
  bytes.to_string()
}

type MoonMem;
fn MoonMem::new(in: Bytes) -> MoonMem = "%string_to_jsstring"

fn init {}

fn main {}

pub fn http_entrypoint(path: HostString) -> MoonMem {
  let path = path.get()
  let body = Buffer::make(256)
  body.write_string("ğŸ°MoonBit å’Œ âš™ï¸Rust è®©è®¿é—® ")
  body.write_string(path)
  body.write_string(" çš„å¼€å‘è€…ğŸ› ï¸å†æ¬¡ä¼Ÿå¤§\r\n")
  MoonMem::new(body.to_bytes())
}
